<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.23" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.152" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ğŸ³SSEå®ç°æµå¼ä¼ è¾“","image":[""],"dateModified":"2025-06-25T14:47:52.000Z","author":[]}</script><meta property="og:url" content="https://try-catch.life/article/vccpfz0y/"><meta property="og:site_name" content="ç ä¸åœè¹„"><meta property="og:title" content="ğŸ³SSEå®ç°æµå¼ä¼ è¾“"><meta property="og:description" content="ä»€ä¹ˆæ˜¯SSEæµå¼ä¼ è¾“ï¼Ÿ æ¦‚å¿µ SSEå…¨ç§°ä¸ºServer-Sent Eventsï¼Œæ˜¯HTML5æ ‡å‡†ä¸­çš„é€šä¿¡æŠ€æœ¯ã€‚å®ƒåŸºäºHTTPåè®®å»ºç«‹å•å‘é€šé“ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿå®æ—¶å‘å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰æ¨é€æ›´æ–°ã€‚è¿™ç§æŒç»­çš„æ•°æ®æµä¼ è¾“æ–¹å¼ï¼Œæ­£æ˜¯æµå¼ä¼ è¾“çš„æ ¸å¿ƒä½“ç°ã€‚ç±»ä¼¼ChatGPTçš„é—´æ–­å“åº”æ•ˆæœï¼Œåº•å±‚æ­£æ˜¯é‡‡ç”¨SSEå®ç°çš„æµå¼ä¼ è¾“ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©SSEï¼Ÿ åœ¨ä¼ ç»Ÿé•¿è½®è¯¢æ¨¡å¼ä¸­ï¼š å®¢æˆ·..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-06-25T14:47:52.000Z"><meta property="article:tag" content="SSE"><meta property="article:tag" content="æµå¼ä¼ è¾“"><meta property="article:tag" content="å‰ç«¯å¼€å‘"><meta property="article:modified_time" content="2025-06-25T14:47:52.000Z"><link rel="icon" type="image/png" href="/logo.svg"><title>ğŸ³SSEå®ç°æµå¼ä¼ è¾“ | ç ä¸åœè¹„</title><meta name="description" content="ä»€ä¹ˆæ˜¯SSEæµå¼ä¼ è¾“ï¼Ÿ æ¦‚å¿µ SSEå…¨ç§°ä¸ºServer-Sent Eventsï¼Œæ˜¯HTML5æ ‡å‡†ä¸­çš„é€šä¿¡æŠ€æœ¯ã€‚å®ƒåŸºäºHTTPåè®®å»ºç«‹å•å‘é€šé“ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿå®æ—¶å‘å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰æ¨é€æ›´æ–°ã€‚è¿™ç§æŒç»­çš„æ•°æ®æµä¼ è¾“æ–¹å¼ï¼Œæ­£æ˜¯æµå¼ä¼ è¾“çš„æ ¸å¿ƒä½“ç°ã€‚ç±»ä¼¼ChatGPTçš„é—´æ–­å“åº”æ•ˆæœï¼Œåº•å±‚æ­£æ˜¯é‡‡ç”¨SSEå®ç°çš„æµå¼ä¼ è¾“ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©SSEï¼Ÿ åœ¨ä¼ ç»Ÿé•¿è½®è¯¢æ¨¡å¼ä¸­ï¼š å®¢æˆ·..."><link rel="preload" href="/assets/style-DTZRX9ec.css" as="style"><link rel="stylesheet" href="/assets/style-DTZRX9ec.css"><link rel="modulepreload" href="/assets/app-D8AyPJhW.js"><link rel="modulepreload" href="/assets/index.html-S0BR8Yy9.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-ba9029b3><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-1af0109f></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-1af0109f> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-ba9029b3 data-v-6c673f19><div class="vp-navbar" vp-navbar data-v-6c673f19 data-v-200f419d><div class="wrapper" data-v-200f419d><div class="container" data-v-200f419d><div class="title" data-v-200f419d><div class="vp-navbar-title" data-v-200f419d data-v-3e182ad5><a class="vp-link no-icon link title" href="/" data-v-3e182ad5 data-v-c361ef35><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/logo.svg" alt data-v-681063b1><!--]--><!--[--><img class="vp-image light logo" style="" src="/logo.svg" alt data-v-681063b1><!--]--><!--]--><!--]--><span data-v-3e182ad5>ç ä¸åœè¹„</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-200f419d><div class="content-body" data-v-200f419d><!--[--><!--]--><div class="vp-navbar-search search" data-v-200f419d><div class="search-wrapper" data-v-1a555dc1><!----><div id="local-search" data-v-1a555dc1><button type="button" class="mini-search mini-search-button" aria-label="æœç´¢æ–‡æ¡£" data-v-1a555dc1><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">æœç´¢æ–‡æ¡£</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-200f419d data-v-59a1d196><span id="main-nav-aria-label" class="visually-hidden" data-v-59a1d196>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-59a1d196 data-v-49b4d3c8 data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-49b4d3c8 data-v-0e88087f><img src="/icons/blog.svg" alt="" style="" data-v-0e88087f></span><span data-v-49b4d3c8>åšå®¢</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-59a1d196 data-v-49b4d3c8 data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-49b4d3c8 data-v-0e88087f><img src="/icons/tag.svg" alt="" style="" data-v-0e88087f></span><span data-v-49b4d3c8>æ ‡ç­¾</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/categories/" tabindex="0" data-v-59a1d196 data-v-49b4d3c8 data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-49b4d3c8 data-v-0e88087f><img src="/icons/butterfly.svg" alt="" style="" data-v-0e88087f></span><span data-v-49b4d3c8>åˆ†ç±»</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-59a1d196 data-v-49b4d3c8 data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-49b4d3c8 data-v-0e88087f><img src="/icons/guidang.svg" alt="" style="" data-v-0e88087f></span><span data-v-49b4d3c8>å½’æ¡£</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-59a1d196 data-v-a8afb40a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-a8afb40a><span class="text" data-v-a8afb40a><span class="vp-icon-img" aria-hidden data-v-a8afb40a data-v-0e88087f><img src="/icons/resource.svg" alt="" style="" data-v-0e88087f></span><!----><span data-v-a8afb40a>èµ„æº</span><!----><span class="vpi-chevron-down text-icon" data-v-a8afb40a></span></span></button><div class="menu" data-v-a8afb40a><div class="vp-menu" data-v-a8afb40a data-v-1ff0ae57><div class="items" data-v-1ff0ae57><!--[--><!--[--><div class="vp-menu-link" data-v-1ff0ae57 data-v-be25c64d><a class="vp-link no-icon link" href="https://ziqingchuan.github.io/SQM/" target="_blank" rel="noreferrer" data-v-be25c64d data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-be25c64d data-v-0e88087f><img src="/icons/SQM.svg" alt="" style="" data-v-0e88087f></span> è½¯ä»¶è´¨é‡ç®¡ç† <!----><!--]--><span class="vpi-external-link icon" data-v-c361ef35></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-1ff0ae57 data-v-be25c64d><a class="vp-link no-icon link" href="https://ziqingchuan.github.io/SSD/" target="_blank" rel="noreferrer" data-v-be25c64d data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-be25c64d data-v-0e88087f><img src="/icons/SSD.svg" alt="" style="" data-v-0e88087f></span> è½¯ä»¶ç³»ç»Ÿè®¾è®¡ <!----><!--]--><span class="vpi-external-link icon" data-v-c361ef35></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-1ff0ae57 data-v-be25c64d><a class="vp-link no-icon link" href="https://vue3js.cn/interview/" target="_blank" rel="noreferrer" data-v-be25c64d data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-be25c64d data-v-0e88087f><img src="/icons/other.svg" alt="" style="" data-v-0e88087f></span> webå‰ç«¯é¢è¯•çŸ¥è¯†ç‚¹ <!----><!--]--><span class="vpi-external-link icon" data-v-c361ef35></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-1ff0ae57 data-v-be25c64d><a class="vp-link no-icon link" href="/article/20jmp37t/" data-v-be25c64d data-v-c361ef35><!--[--><span class="vp-icon-img" aria-hidden data-v-be25c64d data-v-0e88087f><img src="/icons/heart.svg" alt="" style="" data-v-0e88087f></span> æˆ‘çš„ç®€å† <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-200f419d data-v-254f5228><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-254f5228 data-v-fa140818 data-v-9f5b7257><span class="check" data-v-9f5b7257><span class="icon" data-v-9f5b7257><!--[--><span class="vpi-sun sun" data-v-fa140818></span><span class="vpi-moon moon" data-v-fa140818></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-200f419d data-v-cd9c545f data-v-bd81a305><!--[--><a class="vp-social-link no-icon" href="https://github.com/ziqingchuan" aria-label="github" target="_blank" rel="noopener" data-v-bd81a305 data-v-5acf94b6><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-200f419d data-v-47572bee data-v-a8afb40a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-a8afb40a><span class="vpi-more-horizontal icon" data-v-a8afb40a></span></button><div class="menu" data-v-a8afb40a><div class="vp-menu" data-v-a8afb40a data-v-1ff0ae57><!----><!--[--><!--[--><!----><div class="group" data-v-47572bee><div class="item appearance" data-v-47572bee><p class="label" data-v-47572bee>å¤–è§‚</p><div class="appearance-action" data-v-47572bee><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-47572bee data-v-fa140818 data-v-9f5b7257><span class="check" data-v-9f5b7257><span class="icon" data-v-9f5b7257><!--[--><span class="vpi-sun sun" data-v-fa140818></span><span class="vpi-moon moon" data-v-fa140818></span><!--]--></span></span></button></div></div></div><div class="group" data-v-47572bee><div class="item social-links" data-v-47572bee><div class="vp-social-links social-links-list" data-v-47572bee data-v-bd81a305><!--[--><a class="vp-social-link no-icon" href="https://github.com/ziqingchuan" aria-label="github" target="_blank" rel="noopener" data-v-bd81a305 data-v-5acf94b6><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-200f419d data-v-ba45f241><span class="container" data-v-ba45f241><span class="top" data-v-ba45f241></span><span class="middle" data-v-ba45f241></span><span class="bottom" data-v-ba45f241></span></span></button></div></div></div></div><div class="divider" data-v-200f419d><div class="divider-line" data-v-200f419d></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-ba9029b3 data-v-1621e42d><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-1621e42d><span class="vpi-align-left menu-icon" data-v-1621e42d></span><span class="menu-text" data-v-1621e42d>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-1621e42d data-v-a1ae14e0><button data-v-a1ae14e0>è¿”å›é¡¶éƒ¨</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-ba9029b3 data-v-dce4c7e1><div class="vp-doc-container is-blog" data-v-dce4c7e1 data-v-38a66809><!--[--><!--]--><div class="container" data-v-38a66809><!----><div class="content" data-v-38a66809><div class="content-container" data-v-38a66809><!--[--><!--]--><main class="main" data-v-38a66809><nav class="vp-breadcrumb" data-v-38a66809 data-v-7b359f71><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-7b359f71><!--[--><li property="itemListElement" typeof="ListItem" data-v-7b359f71><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-7b359f71 data-v-c361ef35><!--[-->é¦–é¡µ<!--]--><!----></a><span class="vpi-chevron-right" data-v-7b359f71></span><meta property="name" content="é¦–é¡µ" data-v-7b359f71><meta property="position" content="1" data-v-7b359f71></li><li property="itemListElement" typeof="ListItem" data-v-7b359f71><a class="vp-link no-icon link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-7b359f71 data-v-c361ef35><!--[-->åšå®¢<!--]--><!----></a><span class="vpi-chevron-right" data-v-7b359f71></span><meta property="name" content="åšå®¢" data-v-7b359f71><meta property="position" content="2" data-v-7b359f71></li><li property="itemListElement" typeof="ListItem" data-v-7b359f71><a class="vp-link no-icon link breadcrumb" href="/blog/categories/?id=0ffed7" property="item" typeof="WebPage" data-v-7b359f71 data-v-c361ef35><!--[-->å‰ç«¯å¼€å‘<!--]--><!----></a><span class="vpi-chevron-right" data-v-7b359f71></span><meta property="name" content="å‰ç«¯å¼€å‘" data-v-7b359f71><meta property="position" content="3" data-v-7b359f71></li><li property="itemListElement" typeof="ListItem" data-v-7b359f71><a class="vp-link no-icon link breadcrumb current" href="/article/vccpfz0y/" property="item" typeof="WebPage" data-v-7b359f71 data-v-c361ef35><!--[-->ğŸ³SSEå®ç°æµå¼ä¼ è¾“<!--]--><!----></a><!----><meta property="name" content="ğŸ³SSEå®ç°æµå¼ä¼ è¾“" data-v-7b359f71><meta property="position" content="4" data-v-7b359f71></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-92a6ec06>ğŸ³SSEå®ç°æµå¼ä¼ è¾“ <!----></h1><div class="vp-doc-meta" data-v-92a6ec06><!--[--><!--]--><p class="reading-time" data-v-92a6ec06><span class="vpi-books icon" data-v-92a6ec06></span><span data-v-92a6ec06>çº¦ 1249 å­—</span><span data-v-92a6ec06>å¤§çº¦ 4 åˆ†é’Ÿ</span></p><p data-v-92a6ec06><span class="vpi-tag icon" data-v-92a6ec06></span><!--[--><a class="vp-link no-icon link tag vp-tag-gdbn" href="/blog/tags/?tag=å‰ç«¯å¼€å‘" data-v-92a6ec06 data-v-c361ef35><!--[-->å‰ç«¯å¼€å‘<!--]--><!----></a><a class="vp-link no-icon link tag vp-tag-gdbn" href="/blog/tags/?tag=æµå¼ä¼ è¾“" data-v-92a6ec06 data-v-c361ef35><!--[-->æµå¼ä¼ è¾“<!--]--><!----></a><a class="vp-link no-icon link tag vp-tag-u6lx" href="/blog/tags/?tag=SSE" data-v-92a6ec06 data-v-c361ef35><!--[-->SSE<!--]--><!----></a><!--]--></p><!--[--><!--]--><p class="create-time" data-v-92a6ec06><span class="vpi-clock icon" data-v-92a6ec06></span><span data-v-92a6ec06>2025-06-25</span></p></div><!--]--><!--[--><!--]--><div class="_article_vccpfz0y_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-38a66809><!--[--><!--]--><div data-v-38a66809><h2 id="ä»€ä¹ˆæ˜¯sseæµå¼ä¼ è¾“" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯sseæµå¼ä¼ è¾“"><span>ä»€ä¹ˆæ˜¯SSEæµå¼ä¼ è¾“ï¼Ÿ</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æ¦‚å¿µ</p><p>SSEå…¨ç§°ä¸ºServer-Sent Eventsï¼Œæ˜¯HTML5æ ‡å‡†ä¸­çš„é€šä¿¡æŠ€æœ¯ã€‚å®ƒåŸºäºHTTPåè®®å»ºç«‹å•å‘é€šé“ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿå®æ—¶å‘å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰æ¨é€æ›´æ–°ã€‚è¿™ç§æŒç»­çš„æ•°æ®æµä¼ è¾“æ–¹å¼ï¼Œæ­£æ˜¯æµå¼ä¼ è¾“çš„æ ¸å¿ƒä½“ç°ã€‚ç±»ä¼¼ChatGPTçš„é—´æ–­å“åº”æ•ˆæœï¼Œåº•å±‚æ­£æ˜¯é‡‡ç”¨SSEå®ç°çš„æµå¼ä¼ è¾“ã€‚</p></div><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©sse" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©sse"><span>ä¸ºä»€ä¹ˆé€‰æ‹©SSEï¼Ÿ</span></a></h2><p>åœ¨ä¼ ç»Ÿé•¿è½®è¯¢æ¨¡å¼ä¸­ï¼š</p><ul><li>å®¢æˆ·ç«¯å¿…é¡»ä¸æ–­å‘èµ·è¯·æ±‚</li><li>æœåŠ¡ç«¯å“åº”å‰ä¼šé˜»å¡åç»­è¯·æ±‚</li><li>æ¯æ¬¡é€šä¿¡éƒ½éœ€è¦å®Œæ•´HTTPæ¡æ‰‹</li></ul><p>è€ŒSSEå¸¦æ¥ä¸‰å¤§ä¼˜åŠ¿ï¼š</p><ol><li><strong>å•å‘å®æ—¶æ¨é€</strong>ï¼šæœåŠ¡ç«¯å¯ä¸»åŠ¨å¤šæ¬¡å‘é€æ•°æ®</li><li><strong>è¿æ¥æŒä¹…åŒ–</strong>ï¼šå•æ¬¡TCPè¿æ¥æŒç»­ä¼ è¾“</li><li><strong>èµ„æºé«˜æ•ˆåˆ©ç”¨</strong>ï¼šé¿å…é‡å¤å»ºç«‹è¿æ¥çš„å¼€é”€</li></ol><h2 id="æŠ€æœ¯å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯å®ç°åŸç†"><span>æŠ€æœ¯å®ç°åŸç†</span></a></h2><h3 id="_1-å‚æ•°è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_1-å‚æ•°è®¾ç½®"><span>1. å‚æ•°è®¾ç½®</span></a></h3><p>SSE æœ¬è´¨æ˜¯ä¸€ä¸ªåŸºäº http åè®®çš„é€šä¿¡æŠ€æœ¯ã€‚ å› æ­¤æƒ³è¦ä½¿ç”¨ SSE æŠ€æœ¯æ„å»ºéœ€è¦æœåŠ¡å™¨å®æ—¶æ¨é€ä¿¡æ¯åˆ°å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œåªéœ€è¦å°†ä¼ ç»Ÿçš„ http å“åº”å¤´çš„ <code>contentType</code> è®¾ç½®ä¸º <code>text/event-stream</code>ã€‚ å¹¶ä¸”ä¸ºäº†ä¿è¯å®¢æˆ·ç«¯å±•ç¤ºçš„æ˜¯æœ€æ–°æ•°æ®ï¼Œéœ€è¦å°† <code>Cache-Control</code> è®¾ç½®ä¸º <code>no-cache</code>ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒSSE æœ¬è´¨æ˜¯ä¸€ä¸ª TCP è¿æ¥ï¼Œå› æ­¤ä¸ºäº†ä¿è¯ SSE çš„æŒç»­å¼€å¯ï¼Œéœ€è¦å°† <code>Connection</code> è®¾ç½®ä¸º <code>keep-alive</code>ã€‚</p><div class="language-less line-numbers-mode" data-highlighter="shiki" data-ext="less" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-less"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   Content-Type: text/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">event-stream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   Cache-Control: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">no-cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   Connection: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">keep-alive</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®Œæˆäº†ä¸Šè¿°å“åº”å¤´çš„è®¾ç½®åï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªåŸºäº SSE æµå¼ä¼ è¾“çš„ç®€å• Demo ã€‚</p><h3 id="_2-sse-demo" tabindex="-1"><a class="header-anchor" href="#_2-sse-demo"><span>2. SSE Demo</span></a></h3><p>æœåŠ¡ç«¯ä»£ç ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â express</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">express</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â express</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â PORT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">Â 3000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">use</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">express</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">static</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">public</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/events</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">req</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setHeader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Content-Type</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text/event-stream</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setHeader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Cache-Control</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">no-cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setHeader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Connection</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">keep-alive</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â Â Â Â let</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â startTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â Â Â Â const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â sendEvent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Â Â Â Â Â Â Â Â //Â æ£€æŸ¥æ˜¯å¦å·²ç»å‘é€äº†10ç§’</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Â Â Â Â Â Â Â Â if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â startTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â &gt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">Â 10000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">event:Â close</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">data:Â {}</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\n\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Â //Â å‘é€ä¸€ä¸ªç‰¹æ®Šäº‹ä»¶é€šçŸ¥å®¢æˆ·ç«¯å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">end</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Â //Â å…³é—­è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Â Â Â Â Â Â Â Â Â Â Â Â return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â Â Â Â Â }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â Â Â Â Â Â Â Â const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Â message</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HelloÂ World</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Â timestamp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â };</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">`</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">data:Â </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stringify</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">}</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\n\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">`</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Â Â Â Â Â Â Â Â //Â æ¯éš”2ç§’å‘é€ä¸€æ¬¡æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â Â Â Â Â Â Â Â setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sendEvent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">Â 2000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â Â Â Â sendEvent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">listen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PORT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">`</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ServerÂ runningÂ onÂ http://localhost:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PORT</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">`</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®¢æˆ·ç«¯ä»£ç :</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DOCTYPE</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">en</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">head</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">meta</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UTF-8</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">title</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">SSEÂ Example</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">title</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">head</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">h1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Server-SentÂ EventsÂ Example</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">h1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">div</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">messages</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">div</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">script</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Â Â Â Â Â Â Â Â constÂ evtSourceÂ =Â newÂ EventSource(&#39;/events&#39;);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Â Â Â Â Â Â Â Â constÂ messagesÂ =Â document.getElementById(&#39;messages&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Â Â Â Â Â Â Â Â evtSource.onmessageÂ =Â function(event)Â </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â newElement</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â document</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createElement</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">p</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â eventObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">event</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â newElement</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">textContent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Message:Â </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â +</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â eventObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">message</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â +</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">Â &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Â atÂ </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â +</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â eventObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â Â Â Â Â Â Â Â Â messages</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">appendChild</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">newElement</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â Â Â Â Â }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â Â Â Â &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">script</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä¿è¯ä½¿ç”¨ SSE é€šä¿¡åè®®ä¼ è¾“çš„æ•°æ®èƒ½è¢«å®¢æˆ·ç«¯æ­£ç¡®çš„æ¥æ”¶ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨å‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®åº”è¯¥éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</p><p><strong>æœåŠ¡ç«¯åŸºæœ¬å“åº”æ ¼å¼</strong></p><p>SSE å“åº”ä¸»è¦ç”±ä¸€ç³»åˆ—ä»¥ä¸¤ä¸ªæ¢è¡Œç¬¦åˆ†éš”çš„äº‹ä»¶ç»„æˆã€‚æ¯ä¸ªäº‹ä»¶å¯ä»¥åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>dataï¼šäº‹ä»¶çš„æ•°æ®ã€‚å¦‚æœæ•°æ®è·¨è¶Šå¤šè¡Œï¼Œæ¯è¡Œéƒ½åº”è¯¥ä»¥data:å¼€å§‹ã€‚</span></span>
<span class="line"><span>idï¼šäº‹ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªIDæ¥æ¢å¤äº‹ä»¶æµã€‚</span></span>
<span class="line"><span>eventï¼šè‡ªå®šä¹‰äº‹ä»¶ç±»å‹ã€‚å®¢æˆ·ç«¯å¯ä»¥æ ¹æ®ä¸åŒçš„äº‹ä»¶ç±»å‹æ¥æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚</span></span>
<span class="line"><span>retryï¼šå»ºè®®çš„é‡æ–°è¿æ¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚å¦‚æœè¿æ¥ä¸­æ–­ï¼Œå®¢æˆ·ç«¯å°†ç­‰å¾…è¿™æ®µæ—¶é—´åå°è¯•é‡æ–°è¿æ¥ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å­—æ®µä¹‹é—´ç”¨å•ä¸ªæ¢è¡Œç¬¦åˆ†éš”ï¼Œè€Œäº‹ä»¶ä¹‹é—´ç”¨ä¸¤ä¸ªæ¢è¡Œç¬¦åˆ†éš”ã€‚</p><p><strong>å®¢æˆ·ç«¯å¤„ç†æ ¼å¼</strong></p><p>å®¢æˆ·ç«¯ä½¿ç”¨ EventSource æ¥å£ç›‘å¬ SSE æ¶ˆæ¯ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â evtSource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Â EventSource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">path/to/sse</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">evtSource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">onmessage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Â function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">event</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">Â {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Â Â Â Â console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">event</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Â //Â å¤„ç†æ”¶åˆ°çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="å…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#å…¸å‹åº”ç”¨åœºæ™¯"><span>å…¸å‹åº”ç”¨åœºæ™¯</span></a></h2><p>SSEç‰¹åˆ«é€‚åˆæœåŠ¡ç«¯ä¸»å¯¼çš„æ•°æ®æ¨é€åœºæ™¯ï¼š</p><ul><li>å®æ—¶é€šçŸ¥ç³»ç»Ÿï¼ˆæ–°æ¶ˆæ¯æé†’ï¼‰</li><li>é‡‘èè¡Œæƒ…æ›´æ–°ï¼ˆè‚¡ç¥¨ä»·æ ¼å˜åŠ¨ï¼‰</li><li>æ–°é—»èµ„è®¯æµï¼ˆå®æ—¶æ–°é—»æ¨é€ï¼‰</li><li>è¿›åº¦ç›‘æ§ï¼ˆä»»åŠ¡æ‰§è¡Œè¿›åº¦åé¦ˆï¼‰</li><li>æ—¥å¿—å®æ—¶å±•ç¤ºï¼ˆè¿ç»´ç›‘æ§é¢æ¿ï¼‰</li></ul><h2 id="æµè§ˆå™¨å…¼å®¹æ€§" tabindex="-1"><a class="header-anchor" href="#æµè§ˆå™¨å…¼å®¹æ€§"><span>æµè§ˆå™¨å…¼å®¹æ€§</span></a></h2><p>ç°ä»£æµè§ˆå™¨å¯¹SSEæ”¯æŒè‰¯å¥½ï¼š</p><ul><li>Chrome 6+ âœ…</li><li>Firefox 6+ âœ…</li><li>Safari 5+ âœ…</li><li>Edge 79+ âœ…</li><li>ä»…IEå’Œä½ç‰ˆæœ¬æµè§ˆå™¨ï¼ˆå¦‚Opera miniï¼‰ä¸æ”¯æŒ</li></ul><h2 id="sse-vs-websocket" tabindex="-1"><a class="header-anchor" href="#sse-vs-websocket"><span>SSE vs WebSocket</span></a></h2><table><thead><tr><th>ç‰¹æ€§</th><th>SSE</th><th>WebSocket</th></tr></thead><tbody><tr><td><strong>åè®®</strong></td><td>åŸºäºHTTP</td><td>ç‹¬ç«‹åè®®(ws/wss)</td></tr><tr><td><strong>é€šä¿¡æ–¹å‘</strong></td><td>å•å‘(æœåŠ¡ç«¯â†’å®¢æˆ·ç«¯)</td><td>å…¨åŒå·¥åŒå‘é€šä¿¡</td></tr><tr><td><strong>é‡è¿æœºåˆ¶</strong></td><td>æµè§ˆå™¨è‡ªåŠ¨å¤„ç†</td><td>éœ€æ‰‹åŠ¨å®ç°</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>é«˜é¢‘æ›´æ–°åœºæ™¯ä¼˜ç§€</td><td>è¶…é«˜å®æ—¶äº¤äº’åœºæ™¯</td></tr><tr><td><strong>å¤æ‚åº¦</strong></td><td>å®ç°ç®€å•ï¼Œç»´æŠ¤æˆæœ¬ä½</td><td>éœ€å¤„ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æœåŠ¡ç«¯ä¸»å¯¼çš„æ•°æ®æ¨é€</td><td>åœ¨çº¿æ¸¸æˆ/å³æ—¶èŠå¤©ç­‰</td></tr></tbody></table><h2 id="æŠ€æœ¯é€‰å‹å»ºè®®" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯é€‰å‹å»ºè®®"><span>æŠ€æœ¯é€‰å‹å»ºè®®</span></a></h2><p>å½“ä½ çš„åœºæ™¯æ»¡è¶³ä»¥ä¸‹ç‰¹å¾æ—¶ï¼ŒSSEæ˜¯æœ€ä½³é€‰æ‹©ï¼š</p><ol><li>æ•°æ®æµå‘ä¸»è¦æ˜¯æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯</li><li>éœ€è¦è½»é‡çº§å®ç°æ–¹æ¡ˆ</li><li>æœŸæœ›åˆ©ç”¨ç°æœ‰HTTPåŸºç¡€è®¾æ–½</li><li>éœ€è¦è‡ªåŠ¨é‡è¿æœºåˆ¶ä¿éšœç¨³å®šæ€§</li></ol></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-38a66809 data-v-a54c95ef><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-a54c95ef><span class="contributors-label" data-v-a54c95ef>è´¡çŒ®è€…: </span><span class="contributors-info" data-v-a54c95ef><!--[--><!--[--><span class="contributor" data-v-a54c95ef>221250108</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-a54c95ef><div class="pager" data-v-a54c95ef><a class="vp-link no-icon link pager-link prev" href="/article/gkwazc48/" data-v-a54c95ef data-v-c361ef35><!--[--><span class="desc" data-v-a54c95ef>ä¸Šä¸€é¡µ</span><span class="title" data-v-a54c95ef>ğŸ³jsä¸­æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•</span><!--]--><!----></a></div><div class="pager" data-v-a54c95ef><a class="vp-link no-icon link pager-link next" href="/article/5fg41zwh/" data-v-a54c95ef data-v-c361ef35><!--[--><span class="desc" data-v-a54c95ef>ä¸‹ä¸€é¡µ</span><span class="title" data-v-a54c95ef>ğŸ³æµ…è°ˆRAGåº”ç”¨</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-38a66809><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-ba9029b3 data-v-837e2fb3><span class="percent" data-allow-mismatch data-v-837e2fb3>0%</span><span class="show icon vpi-back-to-top" data-v-837e2fb3></span><svg aria-hidden="true" data-v-837e2fb3><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-837e2fb3></circle></svg></button><footer class="vp-footer" vp-footer data-v-ba9029b3 data-v-4579ecd3><!--[--><div class="container" data-v-4579ecd3><p class="message" data-v-4579ecd3>ç”± <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> æä¾›æŠ€æœ¯æ”¯æŒï¼Œä¸»é¢˜æ¥è‡ª <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><p class="copyright" data-v-4579ecd3>Â© 2025  try-catch.life</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-D8AyPJhW.js" defer></script></body></html>